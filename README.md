# Virtual-Memory Page Replacement

This program simulates the actions of a virtual-memory subsystem. Specifically it takes a sequence of logical memory operations generated by a target process and "convert" them into physical addresses. In reality, however, it will not be running a target process but instead using a memory trace already generated (using an application suite from Intel called `pin`) and stored into a text file.

Here are the first few lines from a memory trace generated by a "Hello, World!" program:

```
I: 0x7feee195f090
I: 0x7feee195f093
W: 0x7ffe23dd2e88
I: 0x7feee195fea0
W: 0x7ffe23dd2e80
I: 0x7feee195fea1
I: 0x7feee195fea4
W: 0x7ffe23dd2e78
I: 0x7feee195fea6
```

Each line starts with a leading `I`, `W`, or `R` (standing for "instruction read", "memory write", or "memory read" respectively). This single character (and a trailing colon) is followed on the line by a virtual-memory address in hexadecimal. The address must be converted into a physical address, and it is this conversion step -- and much that is needed to make it happen by way of data structures and algorithms -- that my code simulates.

A few trace files generated by `pin` are in the `traces/` directory of the repository.

---

**Command Line Arguments**

* The simulator is invoked on the command line when running `virtmem`.
* The algorithm to be used is indicated by a command-line argument 
(`--replace=fifo`, `--replace=lru` or `--replace=clock`).
* The size of a simulated physical frame is indicated at the command line (`--framesize=8` specifies physical frames of size 256 bytes each, i.e., 2^8). Note that the frame size is forced to be a power-of-two.
* The size of the simulated physical memory is indicated at the command line (`--numframes=256` specifies a simulated memory where there are 256 frames). **There is no requirement that the number of frames must be a power-of-two!**
* The file containing the memory trace is indicated at the command line (`--file=hello_out.txt`).
* A progress-bar is enabled via the `--progress` command-line argument.

Example:

```
./virtmem --file=traces/hello-out.txt --framesize=12 --numframes=256 --replace=fifo --progress
```

and here is the output:
```
Progress [............................................................] 100%
Memory references: 127926
Page faults: 119
Swap ins: 119
Swap outs: 0
```
